# H∆∞·ªõng D·∫´n S·ª≠ D·ª•ng T√≠nh NƒÉng Nh·∫≠p D·ª± √Ån

## T·ªïng Quan
H·ªá th·ªëng qu·∫£n l√Ω nh·∫≠p kho hi·ªán t·∫°i h·ªó tr·ª£ 2 lo·∫°i nh·∫≠p ch√≠nh:

1. **Nh·∫≠p h√†ng**: Nh·∫≠p h√†ng h√≥a th√¥ng th∆∞·ªùng t·ª´ nh√† cung c·∫•p
2. **Nh·∫≠p d·ª± √°n**: Nh·∫≠p h√†ng h√≥a li√™n quan ƒë·∫øn m·ªôt d·ª± √°n c·ª• th·ªÉ c·ªßa kh√°ch h√†ng

T√≠nh nƒÉng "Nh·∫≠p d·ª± √°n" cho ph√©p b·∫°n t·∫°o phi·∫øu nh·∫≠p kho li√™n quan ƒë·∫øn m·ªôt d·ª± √°n c·ª• th·ªÉ c·ªßa kh√°ch h√†ng. Khi ch·ªçn lo·∫°i nh·∫≠p n√†y, h·ªá th·ªëng s·∫Ω y√™u c·∫ßu b·∫°n ch·ªçn kh√°ch h√†ng ƒë·ªÉ theo d√µi h√†ng h√≥a nh·∫≠p v√†o cho d·ª± √°n n√†o.

## C√°ch S·ª≠ D·ª•ng

### 1. T·∫°o Phi·∫øu Nh·∫≠p D·ª± √Ån M·ªõi

1. **M·ªü trang Qu·∫£n L√Ω Nh·∫≠p Kho**
   - V√†o menu "Qu·∫£n l√Ω nh·∫≠p kho"
   - Click n√∫t "Th√™m m·ªõi"

2. **Ch·ªçn Lo·∫°i Nh·∫≠p**
   - Trong dropdown "Lo·∫°i nh·∫≠p", ch·ªçn "Nh·∫≠p d·ª± √°n"
   - Khi ch·ªçn lo·∫°i n√†y, m·ªôt input "Kh√°ch h√†ng" s·∫Ω xu·∫•t hi·ªán

3. **Ch·ªçn Kh√°ch H√†ng**
   - Click v√†o dropdown "Kh√°ch h√†ng"
   - Ch·ªçn kh√°ch h√†ng c√≥ d·ª± √°n c·∫ßn nh·∫≠p h√†ng
   - H·ªá th·ªëng s·∫Ω hi·ªÉn th·ªã t√™n ƒë·∫ßy ƒë·ªß ho·∫∑c t√™n hi·ªÉn th·ªã c·ªßa kh√°ch h√†ng

4. **ƒêi·ªÅn Th√¥ng Tin Kh√°c**
   - Nh√† cung c·∫•p: Ch·ªçn nh√† cung c·∫•p h√†ng h√≥a
   - Ng√†y nh·∫≠p: Ch·ªçn ng√†y nh·∫≠p kho
   - T√†i x·∫ø: Ch·ªçn t√†i x·∫ø v·∫≠n chuy·ªÉn
   - N·ªôi dung nh·∫≠p: M√¥ t·∫£ n·ªôi dung nh·∫≠p
   - Ghi ch√∫: Th√¥ng tin b·ªï sung

5. **Th√™m S·∫£n Ph·∫©m**
   - Click n√∫t "+" ƒë·ªÉ th√™m s·∫£n ph·∫©m
   - Ch·ªçn s·∫£n ph·∫©m t·ª´ danh s√°ch (s·∫Ω ƒë∆∞·ª£c l·ªçc theo nh√† cung c·∫•p ƒë√£ ch·ªçn)
   - Nh·∫≠p s·ªë l∆∞·ª£ng v√† ghi ch√∫ cho t·ª´ng s·∫£n ph·∫©m

6. **L∆∞u Phi·∫øu**
   - Click "L∆∞u" ƒë·ªÉ t·∫°o phi·∫øu nh·∫≠p d·ª± √°n
   - H·ªá th·ªëng s·∫Ω ki·ªÉm tra v√† y√™u c·∫ßu ch·ªçn kh√°ch h√†ng n·∫øu ch∆∞a ch·ªçn

### 2. Xem Danh S√°ch Phi·∫øu Nh·∫≠p D·ª± √Ån

- **Trong b·∫£ng danh s√°ch**: C·ªôt "Kh√°ch h√†ng" s·∫Ω hi·ªÉn th·ªã t√™n kh√°ch h√†ng cho c√°c phi·∫øu nh·∫≠p d·ª± √°n
- **M√†u s·∫Øc chip**: Phi·∫øu nh·∫≠p d·ª± √°n c√≥ m√†u xanh d∆∞∆°ng (info)
- **L·ªçc d·ªØ li·ªáu**: C√≥ th·ªÉ t√¨m ki·∫øm theo t√™n kh√°ch h√†ng

### 3. Xem Chi Ti·∫øt Phi·∫øu Nh·∫≠p D·ª± √Ån

- Click n√∫t "Xem" tr√™n phi·∫øu nh·∫≠p d·ª± √°n
- Th√¥ng tin kh√°ch h√†ng s·∫Ω hi·ªÉn th·ªã trong ph·∫ßn "Th√¥ng tin chung"
- C√≥ th·ªÉ ch·ªânh s·ª≠a ho·∫∑c sao ch√©p phi·∫øu

### 4. Import Excel Cho Nh·∫≠p D·ª± √Ån

1. **Chu·∫©n B·ªã File Excel**
   - File Excel c·∫ßn c√≥ c·ªôt "Lo·∫°i nh·∫≠p" v·ªõi gi√° tr·ªã "Nh·∫≠p h√†ng" ho·∫∑c "Nh·∫≠p d·ª± √°n"
   - N·∫øu ch·ªçn "Nh·∫≠p d·ª± √°n", c√≥ th·ªÉ th√™m c·ªôt "M√£ KH" v√† "T√™n KH" cho th√¥ng tin kh√°ch h√†ng (t√πy ch·ªçn)

2. **Import D·ªØ Li·ªáu**
   - Click "Import Excel"
   - Ch·ªçn file Excel
   - Trong form b·ªï sung, ch·ªçn kh√°ch h√†ng t·ª´ dropdown
   - H·ªá th·ªëng s·∫Ω t·ª± ƒë·ªông g√°n kh√°ch h√†ng cho t·∫•t c·∫£ phi·∫øu nh·∫≠p d·ª± √°n

## C·∫•u Tr√∫c D·ªØ Li·ªáu

### B·∫£ng shipment_headers
- `customer_id`: ID c·ªßa kh√°ch h√†ng (ch·ªâ c√≥ khi lo·∫°i nh·∫≠p = "Nh·∫≠p d·ª± √°n")
- `customer_name`: T√™n kh√°ch h√†ng (ch·ªâ c√≥ khi lo·∫°i nh·∫≠p = "Nh·∫≠p d·ª± √°n")
- `import_type`: Lo·∫°i nh·∫≠p ("Nh·∫≠p h√†ng", "Nh·∫≠p d·ª± √°n")

### Validation
- Khi ch·ªçn "Nh·∫≠p d·ª± √°n", b·∫Øt bu·ªôc ph·∫£i ch·ªçn kh√°ch h√†ng
- H·ªá th·ªëng s·∫Ω hi·ªÉn th·ªã th√¥ng b√°o l·ªói n·∫øu ch∆∞a ch·ªçn kh√°ch h√†ng

## L·ª£i √çch

1. **Theo d√µi d·ª± √°n**: D·ªÖ d√†ng qu·∫£n l√Ω h√†ng h√≥a nh·∫≠p v√†o cho t·ª´ng d·ª± √°n
2. **B√°o c√°o chi ti·∫øt**: C√≥ th·ªÉ t·∫°o b√°o c√°o theo kh√°ch h√†ng/d·ª± √°n
3. **Qu·∫£n l√Ω t·ªìn kho**: Ph√¢n bi·ªát h√†ng h√≥a theo d·ª± √°n
4. **T√≠nh to√°n chi ph√≠**: Theo d√µi chi ph√≠ h√†ng h√≥a cho t·ª´ng d·ª± √°n

## L∆∞u √ù

- H·ªá th·ªëng ch·ªâ h·ªó tr·ª£ 2 lo·∫°i nh·∫≠p: "Nh·∫≠p h√†ng" v√† "Nh·∫≠p d·ª± √°n"
- Ch·ªâ hi·ªÉn th·ªã input kh√°ch h√†ng khi ch·ªçn "Nh·∫≠p d·ª± √°n"
- Khi ch·ªçn nh√† cung c·∫•p, danh s√°ch s·∫£n ph·∫©m s·∫Ω ƒë∆∞·ª£c l·ªçc theo nh√† cung c·∫•p ƒë√≥
- C√≥ th·ªÉ ch·ªânh s·ª≠a th√¥ng tin kh√°ch h√†ng sau khi t·∫°o phi·∫øu
- D·ªØ li·ªáu kh√°ch h√†ng ƒë∆∞·ª£c l∆∞u tr·ªØ trong database ƒë·ªÉ b√°o c√°o
- H·ªó tr·ª£ import Excel v·ªõi th√¥ng tin kh√°ch h√†ng
- C√°c phi·∫øu nh·∫≠p c≈© c√≥ lo·∫°i "Nh·∫≠p tr·∫£" ho·∫∑c "Nh·∫≠p kh√°c" v·∫´n ƒë∆∞·ª£c hi·ªÉn th·ªã b√¨nh th∆∞·ªùng 

# C·∫≠p nh·∫≠t th√™m c·ªôt ki·ªán h√†ng trong supabase 

## T√≠nh nƒÉng m·ªõi: Nh·∫•n Enter ƒë·ªÉ th√™m s·∫£n ph·∫©m nhanh

- **Nh·∫•n Enter** trong b·∫•t k·ª≥ √¥ n√†o (SL, Ki·ªán h√†ng, Ghi ch√∫) ƒë·ªÉ th√™m s·∫£n ph·∫©m nhanh
- Kh√¥ng c·∫ßn ph·∫£i click v√†o n√∫t "+" 
- TƒÉng t·ªëc ƒë·ªô nh·∫≠p li·ªáu ƒë√°ng k·ªÉ
- Ho·∫°t ƒë·ªông tr√™n c·∫£ desktop v√† mobile

## T·ªëi ∆∞u h√≥a m√£ phi·∫øu

### Format m√£ phi·∫øu m·ªõi:
- **Phi·∫øu nh·∫≠p**: `PNK250124_001` (PNK + ng√†y/th√°ng/nƒÉm + s·ªë th·ª© t·ª±)
- **Phi·∫øu xu·∫•t**: `PXK250124_001` (PXK + ng√†y/th√°ng/nƒÉm + s·ªë th·ª© t·ª±)

### V√≠ d·ª•:
- `PNK250124_001` = Phi·∫øu nh·∫≠p kho ng√†y 25/01/2024, s·ªë th·ª© t·ª± 001
- `PXK250124_015` = Phi·∫øu xu·∫•t kho ng√†y 25/01/2024, s·ªë th·ª© t·ª± 015

### L·ª£i √≠ch:
- **Ng·∫Øn g·ªçn**: T·ª´ 30+ k√Ω t·ª± xu·ªëng c√≤n 12-13 k√Ω t·ª±
- **D·ªÖ ƒë·ªçc**: Format ng√†y th√°ng quen thu·ªôc
- **D·ªÖ t√¨m ki·∫øm**: C√≥ th·ªÉ t√¨m theo ng√†y th√°ng
- **Kh√¥ng tr√πng l·∫∑p**: S·ªë th·ª© t·ª± ng·∫´u nhi√™n 3 ch·ªØ s·ªë

## T√≠nh nƒÉng t√¨m ki·∫øm n√¢ng cao

### Autocomplete cho Nh√† cung c·∫•p v√† Kh√°ch h√†ng:
- **T√¨m ki·∫øm th√¥ng minh**: G√µ t√™n ƒë·ªÉ t√¨m nhanh nh√† cung c·∫•p/kh√°ch h√†ng
- **Hi·ªÉn th·ªã th√¥ng tin chi ti·∫øt**: T√™n ƒë·∫ßy ƒë·ªß, lo·∫°i kh√°ch h√†ng
- **T√¨m ki·∫øm ƒëa ti√™u ch√≠**: T√¨m theo t√™n, t√™n ƒë·∫ßy ƒë·ªß, lo·∫°i kh√°ch h√†ng
- **Giao di·ªán th√¢n thi·ªán**: Dropdown v·ªõi th√¥ng tin chi ti·∫øt

### C√°ch s·ª≠ d·ª•ng:
1. **Nh√† cung c·∫•p**: G√µ t√™n nh√† cung c·∫•p ƒë·ªÉ t√¨m nhanh
2. **Kh√°ch h√†ng**: Ch·ªâ hi·ªÉn th·ªã khi ch·ªçn "Nh·∫≠p d·ª± √°n"
3. **T√¨m ki·∫øm**: H·ªó tr·ª£ t√¨m theo t√™n vi·∫øt t·∫Øt ho·∫∑c t√™n ƒë·∫ßy ƒë·ªß
4. **T√†i x·∫ø**: Nh·∫≠p t√™n t√†i x·∫ø t·ª± do (kh√¥ng gi·ªõi h·∫°n danh s√°ch)

## Hi·ªÉn th·ªã v√† sao ch√©p m√£ phi·∫øu

### T√≠nh nƒÉng m·ªõi:
- **Hi·ªÉn th·ªã m√£ phi·∫øu**: M√£ phi·∫øu ƒë∆∞·ª£c hi·ªÉn th·ªã ·ªü g√≥c ph·∫£i tr√™n form v·ªõi n·ªÅn m√†u xanh
- **Icon sao ch√©p**: Click v√†o icon copy ƒë·ªÉ sao ch√©p m√£ phi·∫øu v√†o clipboard
- **Th√¥ng b√°o**: Hi·ªÉn th·ªã th√¥ng b√°o "ƒê√£ sao ch√©p m√£ phi·∫øu v√†o clipboard!" khi copy th√†nh c√¥ng
- **Tooltip**: Hover v√†o icon ƒë·ªÉ xem h∆∞·ªõng d·∫´n "Sao ch√©p m√£ phi·∫øu"

### C√°ch s·ª≠ d·ª•ng:
1. M√£ phi·∫øu hi·ªÉn th·ªã t·ª± ƒë·ªông khi t·∫°o phi·∫øu m·ªõi
2. Click v√†o icon copy (üìã) b√™n c·∫°nh m√£ phi·∫øu
3. M√£ phi·∫øu s·∫Ω ƒë∆∞·ª£c sao ch√©p v√†o clipboard
4. C√≥ th·ªÉ paste v√†o b·∫•t k·ª≥ ƒë√¢u (chat, email, t√†i li·ªáu...)

Ch·∫°y l·ªánh SQL sau trong Supabase SQL Editor:

-- Th√™m c·ªôt kien_hang v√†o b·∫£ng shipment_items
ALTER TABLE shipment_items 
ADD COLUMN IF NOT EXISTS kien_hang INTEGER DEFAULT 1;

-- T·∫°o index cho c·ªôt kien_hang (t√πy ch·ªçn, ƒë·ªÉ t·ªëi ∆∞u hi·ªáu su·∫•t)
CREATE INDEX IF NOT EXISTS idx_shipment_items_kien_hang ON shipment_items(kien_hang);

-- C·∫≠p nh·∫≠t d·ªØ li·ªáu c≈© (n·∫øu c√≥) - ƒë·∫∑t gi√° tr·ªã m·∫∑c ƒë·ªãnh l√† 1
UPDATE shipment_items 
SET kien_hang = 1 
WHERE kien_hang IS NULL;